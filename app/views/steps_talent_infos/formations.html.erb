<%= render 'shared/navbar' %>

<div class="form-container" data-page="2">

  <%= render 'shared/formprogression' %>

  <h2 class="form-titre-page"><i class="fas fa-graduation-cap"></i> Quel est votre parcours <strong>scolaire</strong> ?</h2>


  <%= simple_form_for @talent, url: wizard_path, method: :put do |f| %>

    <div id="formations">
      <%= f.simple_fields_for :talent_formations do |u| %>
        <div class="form-line form-formations">
          <p class="form-label requis">Formation(s)</p>
          <%= u.association :formation, collection: Formation.all, prompt:"Établissement", label: false, input_html: { class:"select2"}  %>
          <%= u.input :title, placeholder: "Diplôme", label: false  %>
          <%= u.input :year, collection: 1992..2018, prompt: "Année d'obtention", label: false   %>
        </div>
      <% end %>
      <div id="formation-hidden" style="display: none">
        <%= f.simple_fields_for :talent_formations do |u| %>
          <div class="form-line form-formations">
            <p class="form-label requis">Formation(s)</p>
            <%= u.association :formation, collection: Formation.all, prompt:"Établissement", label: false, input_html: { class:"select"}  %>
            <%= u.input :title, placeholder: "Diplôme", label: false  %>
            <%= u.input :year, collection: 1992..2018, prompt: "Année d'obtention", label: false   %>
          </div>
        <% end %>
      </div>
    </div>


    <p class= "form-hobby-add" id="bt-formation">Ajouter une formation + </p>

    <div class="form-line">
      <div class="form-semi-line">
        <p class="form-label form-label-semi-line requis">Compétences techniques</p>
        <div class="form-line">
          <%= f.input :techno_ids, collection: Techno.all, label: false, input_html: { class:"select2", multiple: "multiple"}, multiple: true, required: true %>
        </div>
      </div>

      <div class="form-semi-line">
        <p class="form-label form-label-semi-line requis">Compétences linguistiques</p>
        <div class="form-line">
          <%= f.simple_fields_for :talent_languages do |u| %>
            <%= u.association :language, collection: Language.all, label: false, input_html: { class:"select2"}  %>
            <%= u.input :level, collection: 0..5, prompt: "Niveau", label: false %>
            <!-- TODO button -->
            <%= u.button :submit, 'Ajouter +', { :class => "form-hobby-add"} %>
          <% end %>
        </div>
      </div>
    </div>

    <%= f.error_notification message: 'INFORMATIONS NON COMPLÈTES!', id: 'user_error_message', class: 'form_error' %>

    <div class="form-actions">
      <%= link_to "Précedent", previous_wizard_path, class: "b-btn-link form-btn form-btn-precedent" %>
      <%= f.submit "Continuer", class: "b-btn form-btn form-btn-suivant" %>
    </div>


  <% end %>


</div>

<%= render 'shared/footer' %>

