<%= render "shared/navbar" %>
<%= render 'experience' %>
<%= render 'aventure' %>
<%= render 'formation' %>
<%= render 'profil' %>
<%= render 'credentials' %>

<div class="container-show">

  <div class="talent-left">
    <% if current_user.is_a?(Talent) %>
      <p data-target= "modal_profil" class= "modal-button btn-edition"><span> <i class="far fa-edit"></i></span></p>
    <% end %>
    <% if @talent.photo.present? %>

      <div class="photo-profil" style="background-image: url('<%= cl_image_path @talent.photo, :transformation=>[ :gravity=>"face"] %>');">
        <div class="statut"></div>
      </div>

    <% else %>

      <div class="photo-profil">
        <div class="initiale">
          <p><%= @talent.firstname.split(//).first.upcase %><%= @talent.name.split(//).first.upcase %></p>
        </div>
        <div class="statut"></div>
      </div>

    <% end %>

    <div class="talent-name">
      <h1><%= @talent.firstname %> <%= @talent.name %></h1>
      <h2 class="talent-post"><%= @talent.experiences.last.position %></h2>
    </div>
    <div class="talent-info">
      <div class="talent-info-item card-dispsition">
        <p class="icon icon-info"><i class="fas fa-map-marker-alt"></i></p>
        <p><%= @talent.city %></p>
      </div>
      <div class="talent-info-item card-dispsition">
        <p class="icon icon-info"><i class="far fa-compass"></i></p>
        <p><%= @talent.sectors.last.title %></p>
      </div>
      <div class="talent-info-item card-dispsition">
        <p class="icon icon-info"><i class="fas fa-code-branch"></i></p>
        <% if @talent.btoc && @talent.btob %>
          <p> BtoB & BtoC</p>
        <% elsif @talent.btoc %>
          <p>BtoB</p>
        <% else %>
          <p>BtoC</p>
        <% end %>
      </div>
    </div>

    <div class="lower-body-item lower-right-body">
      <div class="lower-right-body-item">
        <h4><i class="fas fa-sliders-h"></i> MES COMPÉTENCES</h4>
        <div class="talent-competences">
          <% @talent.talent_skills.each do |skill| %>
            <p><%= skill.skill.title %></p>
          <% end %>
        </div>
      </div>
      <div class="lower-right-body-item">
        <h4><i class="fas fa-search-plus"></i> MES HOBBIES</h4>
        <div class="talent-competences">
          <% @talent.talent_hobbies.each do |hobby| %>
            <p><%= hobby.hobby.title %></p>
          <% end %>
        </div>
      </div>
    </div>

    <!-- DORIAN TODO -->
    <div class="credentials">
      <p data-target= "modal_credentials"><i class="far fa-star"></i> Voir mes recommandations</p>
    </div>
  </div>


  <div class="talent-right">
    <div class="talent-right-up">
      <% if current_user.is_a?(Talent) %>
        <p data-target= "modal_aventure" class= "modal-button btn-edition"><span> <i class="far fa-edit"></i></span></p>
      <% end %>
      <div class="right-up-item qui-suis-je">
        <h4>Qui suis-je ?</h4>
        <p><%= @talent.overview %></p>
      </div>
      <div class="right-up-item le-job-de-reve">
        <h4>Le job de rêve !</h4>
        <p> <%= @talent.next_aventures.last.overview %></p>
      </div>
      <div class="right-up-item je-recherche">
        <h4>Je recherche</h4>
        <div class="space-between-vertical">
          <div class="recherche-first-line">
            <div class="recherche-item">
              <h5><%= @talent.next_aventures.last.contrat %></h5>
              <p>CONTRAT</p>
            </div>
            <div class="recherche-item">
              <h5><%= @talent.next_aventures.last.remuneration %></h5>
              <p>SALAIRE (Annuel)</p>
            </div>
          </div>
          <div class="recherche-item">
            <h5>(TO DO)</h5>   <!-- A enlever quand fonction en dessous fonctionnera -->
            <% @sectors.each do |sector| %>
              <h5><%= sector.sector.title.capitalize %></h5>
            <% end %>
            <p>SECTEURS</p>
          </div>
          <div class="recherche-item recherche-item-center">
            <div class="map-ville"></div>
            <h5><%= @talent.next_aventures.last.city %></h5>
            <p>VILLE</p>
          </div>
        </div>
      </div>
    </div>
    <div class="talent-right-down lower-body">
      <div class="lower-middle-body">
        <h4><i class="far fa-file-alt"></i> EXPÉRIENCES</h4>
        <% if current_user.is_a?(Talent) %>
          <p data-target= "modal_experience" class= "modal-button btn-edition"><span> <i class="far fa-edit"></i></span></p>
        <% end %>

        <div class="lower-body-item-content">
          <hr class="barre-pointee">
          <div class="talent-experiences">

            <% @experiences.reverse_each do |experience| %>
              <div class="placement-point-barre">
                <div>
                  <div class="point-barre-pointee"></div>
                </div>
                <div class="placement-talent-experience">
                  <p class="experience-post"><%= experience.position %></p>
                  <p class="experience-entreprise">GE TODO(Groupe international)</p>
                  <p class="experience-duree"><%= experience.starting %> - <%= experience.currently ? "Aujourd’hui" : experience.years %></p>
                  <p class="experience-desc"><%= experience.overview %></p>
                </div>
              </div>
            <% end %>

          </div>
        </div>
      </div>
      <div class="lower-middle-body">
        <h4><i class="fas fa-graduation-cap"></i> FORMATIONS</h4>
        <% if current_user.is_a?(Talent) %>
          <p data-target= "modal_formation" class= "modal-button btn-edition"><span> <i class="far fa-edit"></i></span></p>
        <% end %>
        <div class="lower-body-item-content">
          <hr class="barre-pointee">
          <div class="talent-experiences">

            <% @talent_formations.reverse_each do |formation| %>
              <div class="placement-point-barre">
                <div>
                  <div class="point-barre-pointee"></div>
                </div>
                <div class="placement-talent-experience">
                  <p class="experience-post"><%= formation.title %></p>
                  <p class="experience-entreprise"><%= formation.formation.title %></p>
                  <p class="experience-duree"><%= formation.year %></p>
                </div>
              </div>
            <% end %>

          </div>
        </div>
      </div>
    </div>
  </div>



</div>

<%= render "shared/footer" %>

